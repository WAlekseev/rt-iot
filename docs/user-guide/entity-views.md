---
layout: docwithnav
title: Представления сущностей (Entity Views, EVs)
description: Представления сущностей (Entity Views, EVs)
redirect_from: "/docs/user-guide/ui/entity-views"
---

* TOC
{:toc}

## Возможности

Представления сущностей разграничивают данные и атрибуты с устройств и объектов на клиентов. Тенант админ может создать несколько EVs для каждого устройства или объекта и назначить их разным клиентам.

Поддерживаемые варианты использования:
 
 - **Расшарьте** данные об устройстве или объекте нескольким пользователям одновременно.
 - Разрешите отдельным пользователям видеть собранные данные (например, показания датчиков), но **скройте от них отладочную информацию**, такую как уровень заряда батареи, системные ошибки и т. д..
 - Используйте модель "устройство как услуга" (**DaaS**), в которой данные, собранные устройством в разные периоды времени, принадлежат разным клиентам.

## Архитектура

Entity View содержит следующие данные:

 - **TenantId** - ссылка на владельца представления;
 - **CustomerId** - ссылка на клиента, имеющего доступ к представлению;
 - **EntityId** - ссылка на целевое устройство или объект;
 - **Имя и тип** - поля сущностей платформы, используемые для отображения и поиска;
 - **Время начала и окончания** - интервал времени, используемый для ограничения доступа к данным целевого устройства. Клиент не сможет увидеть данные с объекта, вне указанного интервала; 
 - **Timeseries keys** - список ключей временных рядов данных, которые будут доступны для наблюдателя;
 - **Attribute keys** - список имен атрибутов, которые будут доступны для наблюдателя;

![image](/images/user-guide/entity-views/new-entity-view.png) 
 
Важно понимать, как платформа обрабатывает данные и обновляет атрибуты и как эти изменения влияют на EVs.
  
#### Просмотр временных рядов данных
 
Все временные ряды данных хранятся в базе данных от имени целевого объекта. Дублирование временных рядов данных не происходит ни в одном из Entity Views. Когда пользователь открывает дашборд или выполняет вызов REST API от имени entity view-идентификатора, выполняются следующие действия:

 - Метки времени начала и окончания запроса проверяются и корректируются таким образом, чтобы они соответствовали времени начала и окончания Entity View. Например, если дашборд пытается получить данные за 1 год, но EV настроен на доступ только к данным за 6 месяцев.

 - Ключи данных временных рядов запроса проверяются и корректируются на основе ключей данных временных рядов, подготовленных в Entity View. Так, если дашборд пытается получить ключи телеметрии, которые запрещены для этого конкретного представления, он не сможет этого сделать.

 
#### Представления атрибутов
 
Entity View автоматически копирует указанные атрибуты из целевого объекта при каждом сохранении или обновлении этого entity view. По соображениям производительности целевые атрибуты объектов не распространяются в entity view при каждом изменении атрибутов. Вы можете включить автоматическое распространение, настроив узел правил “копировать для просмотра” в цепочку правил и связав сообщения “Post attributes” и “Attributes Updated” с новым узлом правил:
 
![image](/images/user-guide/entity-views/rule-chain.png) 

