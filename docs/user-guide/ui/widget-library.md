---
layout: docwithnav
title: Библиотека Виджетов
description: Библиотека Виджетов

---

* TOC
{:toc}

## Введение

Все IoT-дашборды создаются с использованием виджетов, представленных в библиотеке виджетов. Каждый виджет предоставляет конечным пользователям такие функции, как визуализация данных, дистанционное управление устройствами, управление сигналами тревоги и отображение статического пользовательского html-контента.

## Типы виджетов

В соответствии с предоставленными функциями каждое определение виджета представляет определенный его тип. 
На данный момент существует пять типов виджетов:

 - [Latest values](#latest-values)
 - [Time-series](#time-series)
 - [RPC (Control widget)](#rpc-control-widget)
 - [Alarm widget](#alarm-widget)
 - [Static](#static)
 
Каждый тип виджета имеет собственную конфигурацию источника данных и соответствующий API. 
Каждый виджет требует источника данных для их визуализации. 
Типы доступных источников данных зависят от типа виджета:

* Целевое устройство - этот тип источника данных используется в RPC. Прежде всего, вам нужно указать целевое устройство для виджета RPC.
* Источник тревоги – этот тип источника данных используется в виджетах сигнализации. Он требует, чтобы исходная сущность отображала связанные сигналы тревоги и соответствующие поля сигналов тревоги.
* Сущность – этот тип источника данных используется как в виджетах временных рядов, так и в виджетах последних значений. Прежде всего, вам нужно указать целевую сущность и ключ временных рядов или имя атрибута.
* Функция – этот тип источника данных используется как в виджетах временных рядов, так и в виджетах последних значений для целей отладки. 

Прежде всего, вы нужно указать функцию javascript, которая будет эмулировать данные с устройства, чтобы настроить визуализацию.

### Последние значения

Отображает последние значения определенного атрибута сущности или точки данных временных рядов (например, любой виджет датчика или виджет таблицы сущностей). Этот вид виджетов использует значения атрибутов сущностей или временных рядов в качестве источника данных. 
 
![image](/images/user-guide/ui/widgets/latest-values-datasource.png)

Ниже приведен пример виджета последних значений – цифровой датчик, отображающий текущее значение мощности. 

![image](/images/user-guide/ui/widgets/latest-values-widget-example.png)

### Временные ряды

Отображение исторических значений за выбранный период времени или последних значений в определенном временном окне (например. "Timeseries-Flot" или "timeseries table"). 
Этот вид виджетов использует в качестве источника данных только значения временных рядов сущностей.

Для указания временных рамок отображаемых значений используются настройки «Timewindow». «Timewindow» может быть задан на уровне дашборда или виджета. Это может быть либо динамически изменяемый временной фрейм для последнего временного интервала, либо фиксированный исторический временной фрейм. 
Все эти настройки являются частью конфигурации виджета временных рядов.         
 
![image](/images/user-guide/ui/widgets/time-series-datasource.png)

Ниже приведен пример виджета временных рядов - "Timeseries-Flot", отображающего значения силы тока трех устройств в режиме реального времени. 

![image](/images/user-guide/ui/widgets/time-series-widget-example.png)

### RPC (виджет управления)

Позволяет отправлять команды RPC на устройства и обрабатывать/визуализировать ответ с устройства (например. "Raspberry Pi GPIO Control"). 
Виджеты RPC настраиваются путем указания целевого устройства в качестве конечной точки назначения для команд RPC.

![image](/images/user-guide/ui/widgets/rpc-datasource.png)

Ниже приведен пример виджета RPC - "Basic GPIO Control" - отправка команд коммутатора GPIO и определение текущего состояния коммутатора GPIO.

![image](/images/user-guide/ui/widgets/rpc-widget-example.png)

### Виджет сигнализации

Отображение сигналов тревоги, связанных с указанным объектом, в определенном временном окне (например. "Таблица аварийных сигналов"). Виджеты тревоги настраиваются путем указания сущности в качестве источника тревоги и заполнения соответствующих полей тревоги. Как и Виджеты временных рядов, виджеты сигнализации имеют конфигурацию «timewindow» для указания временных рамок отображаемых сигналов тревоги. Дополнительно конфигурация содержит параметры «Статус тревоги» и «Интервал опроса сигнала тревоги». 
Параметр "Статус тревоги" указывает состояние извлекаемых сигналов. “Интервал опроса сигналов тревоги " управляет частотой извлечения сигналов тревоги в секундах.

![image](/images/user-guide/ui/widgets/alarm-datasource.png) 

Ниже приведен пример виджета сигнализации - "таблица сигналов тревоги", отображающая последние сигналы для актива в режиме реального времени.

![image](/images/user-guide/ui/widgets/alarm-widget-example.png)

### Статический

Отображает статический настраиваемый html-контент (например. "HTML-карта"). Статические виджеты не используют никаких источников данных и обычно настраиваются путем указания статического html-контента и, возможно, стилей css.

![image](/images/user-guide/ui/widgets/static-html.png)

Ниже приведен пример статического виджета - "HTML-карты", отображающей заданный html-контент.

![image](/images/user-guide/ui/widgets/static-widget-example.png) 
 
## Библиотека Виджетов (Пакеты)

Определения виджетов сгруппированы в пакеты виджетов в соответствии с их назначением. Существуют пакеты виджетов системного уровня и уровня тенанта. Платформа включает в себя базовый набор Пакетов виджетов системного уровня. Существует более тридцати виджетов в семи пакетах. Пакеты системного уровня могут управляться системным администратором и доступны для использования любым клиентом в системе. 
Пакетами уровня клиента может управлять клиент-администратор, они доступны для использования только этим тенантом и его клиентами. Вы всегда можете реализовать и добавить свои виджеты, следуя этому руководству.
 
![image](/images/user-guide/ui/widget-bundles.png)
 
### Цифровые Датчики
 
Нужны для визуализации температуры, влажности, скорости и других целых или плавающих значений.

![image](/images/user-guide/ui/digital-gauges.png)

### Аналоговые Датчики
 
Похожи на цифровые датчики, но имеют другой стиль.

![image](/images/user-guide/ui/analog-gauges.png)


### Диаграммы
 
Нужны для визуализации исторических или актуальных данных с временным окном.

![image](/images/user-guide/ui/charts.png)

### GPIO widgets
 
Нужны для визуализации и контроля состояния GPIO целевых устройств.

![image](/images/user-guide/ui/gpio-widgets.png)

### Управление виджетами
 
Нужно для визуализации текущего состояния и отправки команд RPC на целевые устройства.

![image](/images/user-guide/ui/control-widgets.png)

### Виджеты карт
 
Нужны для визуализации геолокации устройств и отслеживания их маршрутов как в режиме реального времени, так и в режиме истории.

![image](/images/user-guide/ui/maps-widgets.png)

### Карточки
 
Нужны для визуализации данных временных рядов или атрибутов в виджете таблицы или карты.

![image](/images/user-guide/ui/cards.png)

### Виджеты сигнализации

Нужны для визуализации сигналов тревоги от конкретных объектов как в режиме реального времени, так и в режиме истории.

![image](/images/user-guide/ui/alarm-widgets.png)

### Виджеты шлюзов

Нужны для управления расширениями.

![image](/images/user-guide/ui/gateway-widgets.png)

### Входные виджеты

Нужны для изменения атрибутов сущностей.

![image](/images/user-guide/ui/input-widgets.png)

## Импорт/экспорт пакетов виджетов

#### Экспорт пакета виджетов

Чтобы экспортировать пакет виджетов, вы должны перейти на страницу «Библиотека виджетов» и нажать на кнопку «Экспорт», расположенную в определенной строке пакета виджетов.

 
![image](/images/user-guide/ui/export-widgets-bundle.png)

#### Импорт пакета виджетов

Аналогично, чтобы импортировать пакет виджетов, вы должны перейти на страницу «Библиотека виджетов» и нажать на кнопку “+” в правом верхнем углу таблицы «Пакетов виджетов», а затем выбрать опцию «Импортировать пакет виджетов».

![image](/images/user-guide/ui/import-widgets-bundle.png)

Появится всплывающее окно импорта пакета виджетов, и вам будет предложено загрузить файл json.

![image](/images/user-guide/ui/import-widgets-bundle-window.png)

## Импорт/экспорт типов виджетов

#### Экспорт типа виджета

Чтобы экспортировать тип виджета, вы должны перейти на страницу «Библиотека виджетов», затем открыть нужный пакет виджетов и, наконец, нажать на кнопку Экспорт, расположенную на конкретной карточке типа виджета.

 
![image](/images/user-guide/ui/export-widget-type.png)

#### Импорт типа виджета

Аналогично, чтобы импортировать тип виджета, вы должны перейти на страницу «Библиотека виджетов», открыть свой пакет виджетов и нажать на большую кнопку “+” в правой нижней части экрана, а затем –на кнопку импорта.

![image](/images/user-guide/ui/import-widget-type.png)

Появится всплывающее окно, и вам будет предложено загрузить файл json.

![image](/images/user-guide/ui/import-widget-type-window.png)
